"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/webhooks";
exports.ids = ["pages/api/webhooks"];
exports.modules = {

/***/ "faunadb":
/*!**************************!*\
  !*** external "faunadb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("faunadb");

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stripe");

/***/ }),

/***/ "(api)/./src/Services/Stripe.ts":
/*!********************************!*\
  !*** ./src/Services/Stripe.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"stripe\": () => (/* binding */ stripe)\n/* harmony export */ });\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_0__);\n\nconst stripe = new (stripe__WEBPACK_IMPORTED_MODULE_0___default())(process.env.STRIPE_API_KEY, {\n    apiVersion: \"2020-08-27\",\n    appInfo: {\n        name: \"ignews\"\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvU2VydmljZXMvU3RyaXBlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QjtBQUdyQixNQUFNQyxNQUFNLEdBQUcsSUFBSUQsK0NBQU0sQ0FDOUJFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjLEVBQzFCO0lBQ0VDLFVBQVUsRUFBRSxZQUFZO0lBQ3hCQyxPQUFPLEVBQUU7UUFDUEMsSUFBSSxFQUFFLFFBQVE7S0FFZjtDQUNGLENBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZ25ld3MvLi9zcmMvU2VydmljZXMvU3RyaXBlLnRzPzVjMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN0cmlwZSBmcm9tICdzdHJpcGUnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL3BhY2thZ2UuanNvbidcblxuZXhwb3J0IGNvbnN0IHN0cmlwZSA9IG5ldyBTdHJpcGUoXG4gIHByb2Nlc3MuZW52LlNUUklQRV9BUElfS0VZLFxuICB7XG4gICAgYXBpVmVyc2lvbjogJzIwMjAtMDgtMjcnLFxuICAgIGFwcEluZm86IHtcbiAgICAgIG5hbWU6ICdpZ25ld3MnLFxuICAgXG4gICAgfSxcbiAgfVxuKSAiXSwibmFtZXMiOlsiU3RyaXBlIiwic3RyaXBlIiwicHJvY2VzcyIsImVudiIsIlNUUklQRV9BUElfS0VZIiwiYXBpVmVyc2lvbiIsImFwcEluZm8iLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/Services/Stripe.ts\n");

/***/ }),

/***/ "(api)/./src/Services/fauna.ts":
/*!*******************************!*\
  !*** ./src/Services/fauna.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fauna\": () => (/* binding */ fauna)\n/* harmony export */ });\n/* harmony import */ var faunadb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! faunadb */ \"faunadb\");\n/* harmony import */ var faunadb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(faunadb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst fauna = new faunadb__WEBPACK_IMPORTED_MODULE_0__.Client({\n    secret: process.env.FAUNADB_KEY\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvU2VydmljZXMvZmF1bmEudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRXpCLE1BQU1DLEtBQUssR0FBRyxJQUFJRCwyQ0FBTSxDQUFDO0lBQzlCRSxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0NBRWhDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZ25ld3MvLi9zcmMvU2VydmljZXMvZmF1bmEudHM/YWJjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQgfSBmcm9tICdmYXVuYWRiJ1xuXG5leHBvcnQgY29uc3QgZmF1bmEgPSBuZXcgQ2xpZW50KHtcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5GQVVOQURCX0tFWVxuICBcbn0pIl0sIm5hbWVzIjpbIkNsaWVudCIsImZhdW5hIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkZBVU5BREJfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/Services/fauna.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/_lib/manageSubscripiton.ts":
/*!**************************************************!*\
  !*** ./src/pages/api/_lib/manageSubscripiton.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"saveSubscription\": () => (/* binding */ saveSubscription)\n/* harmony export */ });\n/* harmony import */ var faunadb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! faunadb */ \"faunadb\");\n/* harmony import */ var faunadb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(faunadb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Services_fauna__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Services/fauna */ \"(api)/./src/Services/fauna.ts\");\n/* harmony import */ var _Services_Stripe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Services/Stripe */ \"(api)/./src/Services/Stripe.ts\");\n\n\n\nasync function saveSubscription(subscriptionId, customerId, createAction = false) {\n    const userRef = await _Services_fauna__WEBPACK_IMPORTED_MODULE_1__.fauna.query(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Select(\"ref\", faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Get(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Match(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Index(\"users_by_stripe_customer_id\"), customerId))));\n    const subscription = await _Services_Stripe__WEBPACK_IMPORTED_MODULE_2__.stripe.subscriptions.retrieve(subscriptionId);\n    const subscriptionData = {\n        id: subscription.id,\n        userId: userRef,\n        status: subscription.status,\n        price_id: subscription.items.data[0].price.id\n    };\n    if (createAction) {\n        await _Services_fauna__WEBPACK_IMPORTED_MODULE_1__.fauna.query(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Create(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Collection(\"subscriptions\"), {\n            data: subscriptionData\n        }));\n    } else {\n        await _Services_fauna__WEBPACK_IMPORTED_MODULE_1__.fauna.query(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Replace(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Select(\"ref\", faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Get(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Match(faunadb__WEBPACK_IMPORTED_MODULE_0__.query.Index(\"subscription_by_id\"), subscriptionId))), {\n            data: subscriptionData\n        }));\n    }\n    console.log(subscriptionData);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL19saWIvbWFuYWdlU3Vic2NyaXBpdG9uLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFDO0FBRVc7QUFDRTtBQUUzQyxlQUFlSSxnQkFBZ0IsQ0FDcENDLGNBQXNCLEVBQ3RCQyxVQUFrQixFQUNsQkMsWUFBWSxHQUFHLEtBQUssRUFDcEI7SUFDQSxNQUFNQyxPQUFPLEdBQUcsTUFBTU4sd0RBQVcsQ0FDL0JELGlEQUFRLENBQ04sS0FBSyxFQUNMQSw4Q0FBSyxDQUNIQSxnREFBTyxDQUNMQSxnREFBTyxDQUFDLDZCQUE2QixDQUFDLEVBQ3RDSyxVQUFVLENBQ1gsQ0FDRixDQUNGLENBQ0Y7SUFFRCxNQUFNTyxZQUFZLEdBQUcsTUFBTVYsMkVBQTZCLENBQUNFLGNBQWMsQ0FBQztJQUV4RSxNQUFNVyxnQkFBZ0IsR0FBRztRQUN2QkMsRUFBRSxFQUFFSixZQUFZLENBQUNJLEVBQUU7UUFDbkJDLE1BQU0sRUFBRVYsT0FBTztRQUNmVyxNQUFNLEVBQUVOLFlBQVksQ0FBQ00sTUFBTTtRQUMzQkMsUUFBUSxFQUFFUCxZQUFZLENBQUNRLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUNOLEVBQUU7S0FDOUM7SUFFRCxJQUFHVixZQUFZLEVBQUM7UUFFaEIsTUFBTUwsd0RBQVcsQ0FDZkQsaURBQVEsQ0FDTkEscURBQVksQ0FBQyxlQUFlLENBQUMsRUFDN0I7WUFBQ3FCLElBQUksRUFBRU4sZ0JBQWdCO1NBQUMsQ0FDekIsQ0FDRjtLQUNBLE1BQU07UUFDTCxNQUFNZCx3REFBVyxDQUNmRCxrREFBUyxDQUNQQSxpREFBUSxDQUNOLEtBQUssRUFDTEEsOENBQUssQ0FDSEEsZ0RBQU8sQ0FDTEEsZ0RBQU8sQ0FBQyxvQkFBb0IsQ0FBQyxFQUM3QkksY0FBYyxDQUNmLENBQ0YsQ0FDRixFQUNEO1lBQUVpQixJQUFJLEVBQUVOLGdCQUFnQjtTQUFDLENBRTFCLENBR0Y7S0FDRjtJQUNFVyxPQUFPLENBQUNDLEdBQUcsQ0FBQ1osZ0JBQWdCLENBQUM7Q0FDakMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZ25ld3MvLi9zcmMvcGFnZXMvYXBpL19saWIvbWFuYWdlU3Vic2NyaXBpdG9uLnRzPzA1NTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcXVlcnkgYXMgcSB9IGZyb20gXCJmYXVuYWRiXCI7XG5cbmltcG9ydCB7IGZhdW5hIH0gZnJvbSBcIi4uLy4uLy4uL1NlcnZpY2VzL2ZhdW5hXCI7XG5pbXBvcnQgeyBzdHJpcGUgfSBmcm9tIFwiLi4vLi4vLi4vU2VydmljZXMvU3RyaXBlXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3Vic2NyaXB0aW9uKFxuICBzdWJzY3JpcHRpb25JZDogc3RyaW5nLFxuICBjdXN0b21lcklkOiBzdHJpbmcsXG4gIGNyZWF0ZUFjdGlvbiA9IGZhbHNlLFxuKSB7XG4gIGNvbnN0IHVzZXJSZWYgPSBhd2FpdCBmYXVuYS5xdWVyeShcbiAgICBxLlNlbGVjdChcbiAgICAgIFwicmVmXCIsXG4gICAgICBxLkdldChcbiAgICAgICAgcS5NYXRjaChcbiAgICAgICAgICBxLkluZGV4KCd1c2Vyc19ieV9zdHJpcGVfY3VzdG9tZXJfaWQnKSxcbiAgICAgICAgICBjdXN0b21lcklkXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIClcblxuICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCBzdHJpcGUuc3Vic2NyaXB0aW9ucy5yZXRyaWV2ZShzdWJzY3JpcHRpb25JZClcblxuICBjb25zdCBzdWJzY3JpcHRpb25EYXRhID0ge1xuICAgIGlkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgdXNlcklkOiB1c2VyUmVmLFxuICAgIHN0YXR1czogc3Vic2NyaXB0aW9uLnN0YXR1cyxcbiAgICBwcmljZV9pZDogc3Vic2NyaXB0aW9uLml0ZW1zLmRhdGFbMF0ucHJpY2UuaWQsXG4gIH1cblxuICBpZihjcmVhdGVBY3Rpb24pe1xuXG4gIGF3YWl0IGZhdW5hLnF1ZXJ5KFxuICAgIHEuQ3JlYXRlKFxuICAgICAgcS5Db2xsZWN0aW9uKCdzdWJzY3JpcHRpb25zJyksXG4gICAgICB7ZGF0YTogc3Vic2NyaXB0aW9uRGF0YX1cbiAgICApXG4gIClcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCBmYXVuYS5xdWVyeShcbiAgICAgIHEuUmVwbGFjZShcbiAgICAgICAgcS5TZWxlY3QoXG4gICAgICAgICAgXCJyZWZcIixcbiAgICAgICAgICBxLkdldChcbiAgICAgICAgICAgIHEuTWF0Y2goXG4gICAgICAgICAgICAgIHEuSW5kZXgoJ3N1YnNjcmlwdGlvbl9ieV9pZCcpLFxuICAgICAgICAgICAgICBzdWJzY3JpcHRpb25JZFxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgeyBkYXRhOiBzdWJzY3JpcHRpb25EYXRhfVxuICAgICBcbiAgICAgIClcbiAgICAgIFxuICAgICAgICAgICAgXG4gICAgKVxuICB9XG4gICAgIGNvbnNvbGUubG9nKHN1YnNjcmlwdGlvbkRhdGEpXG59Il0sIm5hbWVzIjpbInF1ZXJ5IiwicSIsImZhdW5hIiwic3RyaXBlIiwic2F2ZVN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbklkIiwiY3VzdG9tZXJJZCIsImNyZWF0ZUFjdGlvbiIsInVzZXJSZWYiLCJTZWxlY3QiLCJHZXQiLCJNYXRjaCIsIkluZGV4Iiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9ucyIsInJldHJpZXZlIiwic3Vic2NyaXB0aW9uRGF0YSIsImlkIiwidXNlcklkIiwic3RhdHVzIiwicHJpY2VfaWQiLCJpdGVtcyIsImRhdGEiLCJwcmljZSIsIkNyZWF0ZSIsIkNvbGxlY3Rpb24iLCJSZXBsYWNlIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/_lib/manageSubscripiton.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/webhooks.ts":
/*!***********************************!*\
  !*** ./src/pages/api/webhooks.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Services_Stripe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Services/Stripe */ \"(api)/./src/Services/Stripe.ts\");\n/* harmony import */ var _lib_manageSubscripiton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_lib/manageSubscripiton */ \"(api)/./src/pages/api/_lib/manageSubscripiton.ts\");\n\n\nasync function buffer(readable) {\n    const chunks = [];\n    for await (const chunk of readable){\n        chunks.push(typeof chunk === \"string\" ? Buffer.from(chunk) : chunk);\n    }\n    return Buffer.concat(chunks);\n}\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nconst relevantEvents = new Set([\n    \"checkout.session.completed\",\n    \"customer.subscription.updated\",\n    \"customer.subscription.deleted\"\n]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    if (req.method === \"POST\") {\n        const buf = await buffer(req);\n        const secret = req.headers[\"stripe-signature\"];\n        let event;\n        try {\n            event = _Services_Stripe__WEBPACK_IMPORTED_MODULE_0__.stripe.webhooks.constructEvent(buf, secret, process.env.STRIPE_WEBHOOK_SECRET);\n        } catch (err) {\n            return res.status(400).send(`Webhook error: ${err.message}`);\n        }\n        const type = event.type;\n        if (relevantEvents.has(type)) {\n            try {\n                switch(type){\n                    case \"customer.subscription.updated\":\n                    case \"customer.subscription.deleted\":\n                        const subscription = event.data.object;\n                        await (0,_lib_manageSubscripiton__WEBPACK_IMPORTED_MODULE_1__.saveSubscription)(subscription.id, subscription.customer.toString(), false);\n                        break;\n                    case \"checkout.session.completed\":\n                        const checkoutSession = event.data.object;\n                        await (0,_lib_manageSubscripiton__WEBPACK_IMPORTED_MODULE_1__.saveSubscription)(checkoutSession.subscription.toString(), checkoutSession.customer.toString(), true);\n                        break;\n                    default:\n                        throw new Error(\"Unhandled event\");\n                }\n            } catch (err) {\n                return res.json({\n                    error: \"Webhook handler failed\"\n                });\n            }\n        }\n        res.json({\n            received: true\n        });\n    } else {\n        res.setHeader(\"Allow\", \"POST\");\n        res.status(405).end(\"Method not allowed\");\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDaUIsR0FBRyxDQUFDLG9CQUFvQixDQUFDO0tBQ3hDO0NBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZ25ld3MvLi9zcmMvcGFnZXMvYXBpL3dlYmhvb2tzLnRzP2QzYTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCJzdHJlYW1cIjtcbmltcG9ydCBTdHJpcGUgZnJvbSBcInN0cmlwZVwiO1xuaW1wb3J0IHsgc3RyaXBlIH0gZnJvbSBcIi4uLy4uL1NlcnZpY2VzL1N0cmlwZVwiO1xuaW1wb3J0IHsgc2F2ZVN1YnNjcmlwdGlvbiB9IGZyb20gXCIuL19saWIvbWFuYWdlU3Vic2NyaXBpdG9uXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGJ1ZmZlcihyZWFkYWJsZTogUmVhZGFibGUpIHtcbmNvbnN0IGNodW5rcyA9IFtdO1xuXG5mb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJlYWRhYmxlKXtcbmNodW5rcy5wdXNoKFxudHlwZW9mIGNodW5rID09PSBcInN0cmluZ1wiID8gQnVmZmVyLmZyb20oY2h1bmspIDogY2h1bmtcbik7XG59XG5cbnJldHVybiBCdWZmZXIuY29uY2F0KGNodW5rcyk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG5hcGk6IHtcbmJvZHlQYXJzZXI6IGZhbHNlXG59XG59XG5cbmNvbnN0IHJlbGV2YW50RXZlbnRzID0gbmV3IFNldChbXG4nY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQnLFxuJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi51cGRhdGVkJyxcbidjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCdcbl0pXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xuaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJyl7XG5jb25zdCBidWYgPSBhd2FpdCBidWZmZXIocmVxKVxuY29uc3Qgc2VjcmV0ID0gcmVxLmhlYWRlcnNbJ3N0cmlwZS1zaWduYXR1cmUnXVxuXG5sZXQgZXZlbnQ6IFN0cmlwZS5FdmVudDtcblxudHJ5IHtcbmV2ZW50ID0gc3RyaXBlLndlYmhvb2tzLmNvbnN0cnVjdEV2ZW50KGJ1Ziwgc2VjcmV0LCBwcm9jZXNzLmVudi5TVFJJUEVfV0VCSE9PS19TRUNSRVQpXG59IGNhdGNoIChlcnIpe1xucmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBXZWJob29rIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xufVxuXG5jb25zdCB0eXBlID0gZXZlbnQudHlwZTsgXG5cbmlmKHJlbGV2YW50RXZlbnRzLmhhcyh0eXBlKSl7XG4gIHRyeXtcbiAgICBzd2l0Y2ggKHR5cGUpe1xuICAgICAgY2FzZSAnY3VzdG9tZXIuc3Vic2NyaXB0aW9uLnVwZGF0ZWQnOlxuICAgICAgY2FzZSAnY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQnOlxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gZXZlbnQuZGF0YS5vYmplY3QgYXMgU3RyaXBlLlN1YnNjcmlwdGlvbjtcblxuICAgICAgICBhd2FpdCBzYXZlU3Vic2NyaXB0aW9uKFxuICAgICAgICAgIHN1YnNjcmlwdGlvbi5pZCxcbiAgICAgICAgICBzdWJzY3JpcHRpb24uY3VzdG9tZXIudG9TdHJpbmcoKSxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ2NoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJzpcblxuICAgICAgICBjb25zdCBjaGVja291dFNlc3Npb24gPSBldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuQ2hlY2tvdXQuU2Vzc2lvblxuXG4gICAgICAgIGF3YWl0IHNhdmVTdWJzY3JpcHRpb24oXG4gICAgICAgICAgY2hlY2tvdXRTZXNzaW9uLnN1YnNjcmlwdGlvbi50b1N0cmluZygpLFxuICAgICAgICAgIGNoZWNrb3V0U2Vzc2lvbi5jdXN0b21lci50b1N0cmluZygpLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmhhbmRsZWQgZXZlbnQnKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnIpe1xuICAgIHJldHVybiByZXMuanNvbih7IGVycm9yOidXZWJob29rIGhhbmRsZXIgZmFpbGVkJyB9KVxuICB9XG59XG5cbnJlcy5qc29uKHsgcmVjZWl2ZWQ6IHRydWUgfSlcbn0gZWxzZSB7XG5yZXMuc2V0SGVhZGVyKCdBbGxvdycsICdQT1NUJylcbnJlcy5zdGF0dXMoNDA1KS5lbmQoJ01ldGhvZCBub3QgYWxsb3dlZCcpXG59XG5cbn1cbiJdLCJuYW1lcyI6WyJzdHJpcGUiLCJzYXZlU3Vic2NyaXB0aW9uIiwiYnVmZmVyIiwicmVhZGFibGUiLCJjaHVua3MiLCJjaHVuayIsInB1c2giLCJCdWZmZXIiLCJmcm9tIiwiY29uY2F0IiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsInJlbGV2YW50RXZlbnRzIiwiU2V0IiwicmVxIiwicmVzIiwibWV0aG9kIiwiYnVmIiwic2VjcmV0IiwiaGVhZGVycyIsImV2ZW50Iiwid2ViaG9va3MiLCJjb25zdHJ1Y3RFdmVudCIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsInR5cGUiLCJoYXMiLCJzdWJzY3JpcHRpb24iLCJkYXRhIiwib2JqZWN0IiwiaWQiLCJjdXN0b21lciIsInRvU3RyaW5nIiwiY2hlY2tvdXRTZXNzaW9uIiwiRXJyb3IiLCJqc29uIiwiZXJyb3IiLCJyZWNlaXZlZCIsInNldEhlYWRlciIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/webhooks.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/webhooks.ts"));
module.exports = __webpack_exports__;

})();